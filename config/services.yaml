# This file is the entry point to configure your own services.
# Files in the packages/ subdirectory configure your dependencies.

# Put parameters here that don't need to change on each machine where the app is deployed
# https://symfony.com/doc/current/best_practices.html#use-parameters-for-application-configuration
parameters:
    # Secure uploads directory (outside of public/ for better security)
    uploads_directory: '%kernel.project_dir%/var/uploads'
    # IP filter settings
    ip_filter.enabled: true
    ip_filter.whitelist: ['127.0.0.1', '::1']
    ip_filter.blacklist_file: '%kernel.project_dir%/var/ip_blacklist.txt'
    ip_filter.auto_block.threshold: 20
    ip_filter.auto_block.window_seconds: 60
    ip_filter.auto_block.duration_seconds: 3600

services:
    # default configuration for services in *this* file
    _defaults:
        autowire: true      # Automatically injects dependencies in your services.
        autoconfigure: true # Automatically registers your services as commands, event subscribers, etc.

    # makes classes in src/ available to be used as services
    # this creates a service per class whose id is the fully-qualified class name
    App\:
        resource: '../src/'

    App\Service\FileUploadService:
        arguments:
            $uploadsDirectory: '%uploads_directory%'

    App\Service\LibraryService:
        arguments:
            $uploadsDirectory: '%uploads_directory%'

    App\Controller\MediaController:
        arguments:
            $uploadsDirectory: '%uploads_directory%'